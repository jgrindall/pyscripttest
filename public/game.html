<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/phaser/3.23.0/phaser.min.js'></script>
	</head>
	<body>
		
		<script>
		
			let hero;
		
		
			function preload (){
				this.load.image('background', 'assets/background.png');
				this.load.image('floor', 'assets/floor_map.png');
				this.load.spritesheet('hero', 'assets/hero.png', {
                	frameWidth: 64,
                	frameHeight: 64
           	 	});
			}
			
			
			function update(){
			const d = 60;
				hero.body.setVelocity(0);
				if (this.keyW.isDown) {
				  hero.body.velocity.y = -d;
				}
				if (this.keyA.isDown) {
				  hero.body.velocity.x = -d;
				}
				if (this.keyS.isDown) {
				  hero.body.velocity.x = d;
				}
				if (this.keyZ.isDown) {
				  hero.body.velocity.y = d;
				}

 			 }
  
			function create (){
			
			
				this.keyW = this.input.keyboard.addKey('W');
				this.keyA = this.input.keyboard.addKey('A');
				this.keyS = this.input.keyboard.addKey('S');
				this.keyZ = this.input.keyboard.addKey('Z');
  
				const bg = this.add.image(0, 0, 'background');
				bg.scaleY = 1256/1024;
				bg.setOrigin(0, 0);
				
				this._map = this.add.tilemap('floor', 64, 64, 1024, 768, [
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 19, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 19, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 19, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 19, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18],
					[18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18]
				]);
				this._tiles = this._map.addTilesetImage('floor');
				this._layer = this._map.createStaticLayer(0, this._tiles);
				this._layer.setOrigin(0, 0);
				
				 this.anims.create({
				  key: 'left',
				  frames: this.anims.generateFrameNumbers('hero', {start:0, end:4}),
				  frameRate: 8,
				  repeat: -1
				});
				
				
				this.anims.create({
				  key: 'right',
				  frames: this.anims.generateFrameNumbers('hero', {start:3, end:7}),
				  frameRate: 8,
				  repeat: -1
				});
				
				
				hero = this.add.sprite(200, 200);
				hero.setTexture("hero");
				hero.play("left");
				
				
				this.physics.world.enable(hero);
				hero.body.setVelocity(5, -25);
				
			
				this._map.setCollision([19], true);
				
				this._layer.setCollisionBetween(19, 20);
				
				const debugGraphics = this.add.graphics().setAlpha(0.75);
				this._layer.renderDebug(debugGraphics, {
					  tileColor: null, // Color of non-colliding tiles
					  collidingTileColor: new Phaser.Display.Color(243, 134, 48, 255), // Color of colliding tiles
					  faceColor: new Phaser.Display.Color(40, 39, 37, 255) // Color of colliding face edges
					});
				
				
					this.physics.add.collider(hero, this._layer);
			}
			
			
	
			
			var config = {
				type: Phaser.WEBGL,
				parent: 'phaser-example',
				scene: {
					preload: preload,
					create: create,
					update:update
				},
				 physics: {
                	"default": 'arcade',
                	arcade: {
                    	gravity: {
                        	y: 0
                    	}
                	}
            	}
			};

			var game = new Phaser.Game(config);
			
		</script>
	</body>
</html>

